#!/usr/bin/env bash
# file: shunit2.suite

SHUNIT_TEST_NAME_PREFIX="test"
SHUNIT_FUNC_PATTERN="A-Za-z0-9_:-"

_shunit_loadedTests() {
    _shunit_functions_="$(declare -F | awk '{print $3}')"

    echo "${_shunit_functions_}" | grep -- "^${SHUNIT_TEST_NAME_PREFIX}[${SHUNIT_FUNC_PATTERN}]*$"

    unset _shunit_functions_
}

suite() {
    _shunit_functions_="$(_shunit_loadedTests)"

    printf "Loaded Test Functions:\n%s\n" "${_shunit_functions_}" > /dev/stdout

    for _shunit_function_ in ${_shunit_functions_}; do
        suite_addTest "${_shunit_function_}"
    done

    unset _shunit_functions_ _shunit_function_
}
